name: CI

on: [push]

jobs:
  build:
    runs-on: [windows-latest]
    steps:
        
      - name: Checkout
        uses: actions/checkout@v1
        
      - name: NuGet Restore
        run: nuget restore $Env:GITHUB_WORKSPACE\Rogedo.LifeEngine.sln          
                           
      - name: Build
        run: |
           cd "C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\MSBuild\Current\Bin\"           
           .\MSBuild.exe $Env:GITHUB_WORKSPACE\Rogedo.LifeEngine.sln
           
      - name: Run Tests
        run: |
            cd "C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\IDE\CommonExtensions\Microsoft\TestWindow"
            .\vstest.console.exe /Platform:x64 $Env:GITHUB_WORKSPACE\Rogedo.LifeEngine.Test\bin\Debug\netcoreapp3.1\Rogedo.LifeEngine.Test.dll
