ø„
6D:\RobDev\RogedoLife\Rogedo.LifeEngine\Domain\Arena.cs
	namespace 	
Rogedo
 
. 

LifeEngine 
. 
Domain "
{		 
public

 

class

 
Arena

 
:

 
IArena

 
{ 
public 
List 
< 
ICell 
> 

ArenaCells %
{& '
get( +
;+ ,
private- 4
set5 8
;8 9
}: ;
private 
int 
	Dimension 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
CellGeneration !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
private 
List 
< 
string 
> 

Signatures '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
bool 
	Repeating 
{ 	
get 
{ 
return 
CellGeneration %
!=& (

Signatures) 3
.3 4
Count4 9
;9 :
} 
} 	
public 
Arena 
( 
) 
{ 	

ArenaCells 
= 
new 
List !
<! "
ICell" '
>' (
(( )
)) *
;* +

Signatures 
= 
new 
List !
<! "
string" (
>( )
() *
)* +
;+ ,
} 	
public 
int 
GetArenaSize 
(  
)  !
{   	
return!! 

ArenaCells!! 
.!! 
Count!! #
;!!# $
}"" 	
public$$ 
void$$ 

Initialise$$ 
($$ 
int$$ "
	dimension$$# ,
)$$, -
{%% 	
	Dimension&& 
=&& 
	dimension&& !
;&&! "

ArenaCells'' 
='' 
new'' 
List'' !
<''! "
ICell''" '
>''' (
(''( )
)'') *
;''* +
for)) 
()) 
int)) 
x)) 
=)) 
$num)) 
;)) 
x)) 
<)) 
	dimension))  )
;))) *
x))+ ,
++)), .
))). /
{** 
for++ 
(++ 
int++ 
y++ 
=++ 
$num++ 
;++ 
y++  !
<++" #
	dimension++$ -
;++- .
y++/ 0
++++0 2
)++2 3
{,, 
var-- 
cell-- 
=-- 
new-- "
Cell--# '
(--' (
)--( )
;--) *

ArenaCells.. 
... 
Add.. "
(.." #
cell..# '
)..' (
;..( )
}// 
}00 
}11 	
public33 
void33 
InitialiseRandomly33 &
(33& '
int33' *
	dimension33+ 4
)334 5
{44 	
	Dimension55 
=55 
	dimension55 !
;55! "

ArenaCells66 
=66 
new66 
List66 !
<66! "
ICell66" '
>66' (
(66( )
)66) *
;66* +
for88 
(88 
int88 
x88 
=88 
$num88 
;88 
x88 
<88 
	dimension88  )
;88) *
x88+ ,
++88, .
)88. /
{99 
for:: 
(:: 
int:: 
y:: 
=:: 
$num:: 
;:: 
y::  !
<::" #
	dimension::$ -
;::- .
y::/ 0
++::0 2
)::2 3
{;; 
var<< 
cell<< 
=<< 
new<< "
Cell<<# '
(<<' (
)<<( )
;<<) *
if== 
(== 
PopulateCell== $
(==$ %
)==% &
)==& '
cell>> 
.>> 
SetGeneration>> *
(>>* +

Interfaces>>+ 5
.>>5 6
Types>>6 ;
.>>; <
CellGeneration>>< J
.>>J K
Current>>K R
)>>R S
;>>S T

ArenaCells?? 
.?? 
Add?? "
(??" #
cell??# '
)??' (
;??( )
}@@ 
}AA 
}BB 	
privateDD 
boolDD 
PopulateCellDD !
(DD! "
)DD" #
{EE 	
ListFF 
<FF 
charFF 
>FF 
winsFF 
=FF 
newFF !
ListFF" &
<FF& '
charFF' +
>FF+ ,
{FF- .
$charFF/ 2
,FF2 3
$charFF4 7
,FF7 8
$charFF9 <
,FF< =
$charFF> A
,FFA B
$charFFC F
,FFF G
$charFFH K
,FFK L
$charFFM P
,FFP Q
$charFFR U
}FFV W
;FFW X
varGG 
guidGG 
=GG 
GuidGG 
.GG 
NewGuidGG #
(GG# $
)GG$ %
.GG% &
ToStringGG& .
(GG. /
)GG/ 0
;GG0 1
varHH 
	candidateHH 
=HH 
guidHH  
.HH  !
	SubstringHH! *
(HH* +
$numHH+ ,
,HH, -
$numHH. /
)HH/ 0
.HH0 1
ToCharArrayHH1 <
(HH< =
)HH= >
[HH> ?
$numHH? @
]HH@ A
;HHA B
returnJJ 
winsJJ 
.JJ 
ContainsJJ  
(JJ  !
	candidateJJ! *
)JJ* +
;JJ+ ,
}MM 	
publicOO 
stringOO 
GetSignatureOO "
(OO" #
)OO# $
{PP 	
StringBuilderQQ 
sbQQ 
=QQ 
newQQ "
StringBuilderQQ# 0
(QQ0 1
)QQ1 2
;QQ2 3
foreachRR 
(RR 
varRR 
cellRR 
inRR  

ArenaCellsRR! +
)RR+ ,
{SS 
varTT 

simpleCellTT 
=TT  
cellTT! %
.TT% &

GenerationTT& 0
==TT1 3

InterfacesTT4 >
.TT> ?
TypesTT? D
.TTD E
CellGenerationTTE S
.TTS T
DeadTTT X
?TTY Z
$strTT[ ^
:TT_ `
$strTTa d
;TTd e
sbUU 
.UU 
AppendUU 
(UU 

simpleCellUU $
)UU$ %
;UU% &
}VV 
returnWW 
sbWW 
.WW 
ToStringWW 
(WW 
)WW  
;WW  !
}XX 	
publicZZ 
voidZZ 
SeedZZ 
(ZZ 
intZZ 
xZZ 
,ZZ 
intZZ  #
yZZ$ %
)ZZ% &
{[[ 	
var\\ 
index\\ 
=\\ 
GetIndex\\  
(\\  !
x\\! "
,\\" #
y\\$ %
)\\% &
;\\& '

ArenaCells]] 
[]] 
index]] 
]]] 
.]] 
SetGeneration]] +
(]]+ ,

Interfaces]], 6
.]]6 7
Types]]7 <
.]]< =
CellGeneration]]= K
.]]K L
Current]]L S
)]]S T
;]]T U
}^^ 	
public`` 
ICell`` 
	GetCellAt`` 
(`` 
int`` "
x``# $
,``$ %
int``& )
y``* +
)``+ ,
{aa 	
ifbb 
(bb 
(bb 
xbb 
<bb 
$numbb 
||bb 
xbb 
>=bb 
	Dimensionbb (
)bb( )
||bb* ,
(bb- .
ybb. /
<bb0 1
$numbb2 3
||bb4 6
ybb7 8
>=bb9 ;
	Dimensionbb< E
)bbE F
)bbF G
returncc 
newcc 
Cellcc 
(cc  
)cc  !
;cc! "
returndd 

ArenaCellsdd 
[dd 
GetIndexdd &
(dd& '
xdd' (
,dd( )
ydd* +
)dd+ ,
]dd, -
;dd- .
}ee 	
publicgg 
voidgg 
MakeNextGenerationgg &
(gg& '
)gg' (
{hh 	
Listii 
<ii 
Pointii 
>ii 
dyingii 
=ii 
newii  #
Listii$ (
<ii( )
Pointii) .
>ii. /
(ii/ 0
)ii0 1
;ii1 2
boolkk 
cellProcessedkk 
;kk 
forll 
(ll 
intll 
xll 
=ll 
$numll 
;ll 
xll 
<ll 
	Dimensionll  )
;ll) *
xll+ ,
++ll, .
)ll. /
{mm 
fornn 
(nn 
intnn 
ynn 
=nn 
$numnn 
;nn 
ynn  !
<nn" #
	Dimensionnn$ -
;nn- .
ynn/ 0
++nn0 2
)nn2 3
{oo 
cellProcessedpp !
=pp" #
falsepp$ )
;pp) *
varqq 
cellqq 
=qq 
	GetCellAtqq (
(qq( )
xqq) *
,qq* +
yqq, -
)qq- .
;qq. /
ifss 
(ss 
cellss 
.ss 

Generationss '
==ss( *

Interfacesss+ 5
.ss5 6
Typesss6 ;
.ss; <
CellGenerationss< J
.ssJ K
CurrentssK R
)ssR S
{tt 
varuu 
neighbourCountuu *
=uu+ ,!
GetLiveNeighbourCountuu- B
(uuB C
xuuC D
,uuD E
yuuF G
)uuG H
;uuH I
ifvv 
(vv 
neighbourCountvv *
==vv+ -
$numvv. /
||vv0 2
neighbourCountvv3 A
==vvB D
$numvvE F
)vvF G
{ww 
cellProcessedxx )
=xx* +
truexx, 0
;xx0 1
}yy 
}zz 
if|| 
(|| 
cell|| 
.|| 

Generation|| '
==||( *

Interfaces||+ 5
.||5 6
Types||6 ;
.||; <
CellGeneration||< J
.||J K
Dead||K O
)||O P
{}} 
var~~ 
neighbourCount~~ *
=~~+ ,!
GetLiveNeighbourCount~~- B
(~~B C
x~~C D
,~~D E
y~~F G
)~~G H
;~~H I
if 
( 
neighbourCount *
==+ -
$num. /
)/ 0
{
€€ 
cell
  
.
  !
SetGeneration
! .
(
. /

Interfaces
/ 9
.
9 :
Types
: ?
.
? @
CellGeneration
@ N
.
N O
Next
O S
)
S T
;
T U
cellProcessed
‚‚ )
=
‚‚* +
true
‚‚, 0
;
‚‚0 1
}
ƒƒ 
}
„„ 
if
†† 
(
†† 
!
†† 
cellProcessed
†† &
)
††& '
{
‡‡ 
var
ˆˆ 
point
ˆˆ !
=
ˆˆ" #
new
ˆˆ$ '
Point
ˆˆ( -
(
ˆˆ- .
x
ˆˆ. /
,
ˆˆ/ 0
y
ˆˆ1 2
)
ˆˆ2 3
;
ˆˆ3 4
dying
‰‰ 
.
‰‰ 
Add
‰‰ !
(
‰‰! "
point
‰‰" '
)
‰‰' (
;
‰‰( )
}
ŠŠ 
}
‹‹ 
}
ŒŒ 
foreach
ŽŽ 
(
ŽŽ 
var
ŽŽ 
cell
ŽŽ 
in
ŽŽ  

ArenaCells
ŽŽ! +
)
ŽŽ+ ,
{
 
if
 
(
 
cell
 
.
 

Generation
 #
==
$ &

Interfaces
' 1
.
1 2
Types
2 7
.
7 8
CellGeneration
8 F
.
F G
Next
G K
)
K L
cell
‘‘ 
.
‘‘ 
SetGeneration
‘‘ &
(
‘‘& '

Interfaces
‘‘' 1
.
‘‘1 2
Types
‘‘2 7
.
‘‘7 8
CellGeneration
‘‘8 F
.
‘‘F G
Current
‘‘G N
)
‘‘N O
;
‘‘O P
}
’’ 
foreach
”” 
(
”” 
var
”” 
p
”” 
in
”” 
dying
”” #
)
””# $
{
•• 
	GetCellAt
–– 
(
–– 
p
–– 
.
–– 
X
–– 
,
–– 
p
––  
.
––  !
Y
––! "
)
––" #
.
––# $
SetGeneration
––$ 1
(
––1 2

Interfaces
––2 <
.
––< =
Types
––= B
.
––B C
CellGeneration
––C Q
.
––Q R
Dead
––R V
)
––V W
;
––W X
}
—— 
CellGeneration
™™ 
++
™™ 
;
™™ 
var
›› 
	signature
›› 
=
›› 
GetSignature
›› (
(
››( )
)
››) *
;
››* +
if
œœ 
(
œœ 
!
œœ 

Signatures
œœ 
.
œœ 
Contains
œœ $
(
œœ$ %
	signature
œœ% .
)
œœ. /
)
œœ/ 0

Signatures
 
.
 
Add
 
(
 
	signature
 (
)
( )
;
) *
}
žž 	
public
   
int
   
GetPopulation
    
(
    !
)
  ! "
{
¡¡ 	
return
¢¢ 

ArenaCells
¢¢ 
.
¢¢ 
Where
¢¢ #
(
¢¢# $
x
¢¢$ %
=>
¢¢& (
x
¢¢) *
.
¢¢* +

Generation
¢¢+ 5
==
¢¢6 8

Interfaces
¢¢9 C
.
¢¢C D
Types
¢¢D I
.
¢¢I J
CellGeneration
¢¢J X
.
¢¢X Y
Current
¢¢Y `
)
¢¢` a
.
¢¢a b
Count
¢¢b g
(
¢¢g h
)
¢¢h i
;
¢¢i j
}
££ 	
public
¥¥ 
int
¥¥ 
GetGeneration
¥¥  
(
¥¥  !
)
¥¥! "
{
¦¦ 	
return
§§ 
CellGeneration
§§ !
;
§§! "
}
¨¨ 	
private
ªª 
int
ªª 
GetIndex
ªª 
(
ªª 
int
ªª  
x
ªª! "
,
ªª" #
int
ªª$ '
y
ªª( )
)
ªª) *
{
«« 	
return
¬¬ 
(
¬¬ 
x
¬¬ 
%
¬¬ 
	Dimension
¬¬ !
)
¬¬! "
+
¬¬# $
(
¬¬% &
y
¬¬& '
*
¬¬( )
	Dimension
¬¬* 3
)
¬¬3 4
;
¬¬4 5
}
­­ 	
private
¯¯ 
int
¯¯ #
GetLiveNeighbourCount
¯¯ )
(
¯¯) *
int
¯¯* -
cx
¯¯. 0
,
¯¯0 1
int
¯¯2 5
cy
¯¯6 8
)
¯¯8 9
{
°° 	
int
±± 
	liveTally
±± 
=
±± 
$num
±± 
;
±± 
for
²² 
(
²² 
int
²² 
x
²² 
=
²² 
-
²² 
$num
²² 
;
²² 
x
²² 
<
²²  
$num
²²! "
;
²²" #
x
²²$ %
++
²²% '
)
²²' (
{
³³ 
for
´´ 
(
´´ 
int
´´ 
y
´´ 
=
´´ 
-
´´ 
$num
´´ 
;
´´  
y
´´! "
<
´´# $
$num
´´% &
;
´´& '
y
´´( )
++
´´) +
)
´´+ ,
{
µµ 
var
¶¶ 
currentX
¶¶  
=
¶¶! "
cx
¶¶# %
+
¶¶& '
x
¶¶( )
;
¶¶) *
var
·· 
currentY
··  
=
··! "
cy
··# %
+
··& '
y
··( )
;
··) *
if
¹¹ 
(
¹¹ 
x
¹¹ 
==
¹¹ 
$num
¹¹ 
&&
¹¹ !
y
¹¹" #
==
¹¹$ &
$num
¹¹' (
)
¹¹( )
{
ºº 
continue
»»  
;
»»  !
}
¼¼ 
else
½½ 
{
¾¾ 
if
¿¿ 
(
¿¿ 
	GetCellAt
¿¿ %
(
¿¿% &
currentX
¿¿& .
,
¿¿. /
currentY
¿¿0 8
)
¿¿8 9
.
¿¿9 :

Generation
¿¿: D
==
¿¿E G

Interfaces
¿¿H R
.
¿¿R S
Types
¿¿S X
.
¿¿X Y
CellGeneration
¿¿Y g
.
¿¿g h
Current
¿¿h o
)
¿¿o p
	liveTally
ÀÀ %
++
ÀÀ% '
;
ÀÀ' (
}
ÁÁ 
}
ÂÂ 
}
ÃÃ 
return
ÄÄ 
	liveTally
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
}
ÆÆ 
}ÇÇ Ì
5D:\RobDev\RogedoLife\Rogedo.LifeEngine\Domain\Cell.cs
	namespace 	
Rogedo
 
. 

LifeEngine 
. 
Domain "
{ 
public 

class 
Cell 
: 
ICell 
{ 
public 
CellGeneration 

Generation (
{) *
get+ .
;. /
private0 7
set8 ;
;; <
}= >
public

 
Cell

 
(

 
)

 
{ 	

Generation 
= 
CellGeneration '
.' (
Dead( ,
;, -
} 	
public 
void 
SetGeneration !
(! "
CellGeneration" 0

generation1 ;
); <
{ 	

Generation 
= 

generation #
;# $
} 	
} 
} 